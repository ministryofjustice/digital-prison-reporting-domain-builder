#!/bin/bash

# TODO - check if we are on aws or not
#      - should be able to hit local service on ec2 instance

set -e

script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

source $script_dir/lib/script-helpers

cd $script_dir/..

show_wait "Building domain-builder..."
if ./gradlew :cli:shadowJar -q &> /dev/null
then
  show_ok "Launching domain-builder  "
else
  show_fail_and_exit "Build failed              " "Run gradle build manually and review output"
fi

java -jar ./cli/build/libs/cli-*-all.jar $@
